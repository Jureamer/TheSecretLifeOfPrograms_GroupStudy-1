# 컴퓨터는 어떤 논리로 비트를 다루는가?

<br/>

사실 '계산'만을 위해 발명된 근본적인 기술은 드물다.   
대부분의 기술은 다른 목적을 위해 만들어진 기술을 '계산'에 '적용'했을 뿐이다.   
이번 장에서는 꽤 최근에 일어난(2019 기준) 전기 분야의 혁신을 이끌어낸 기술 변화를 다룬다.

<br/>

### 학습 목표
- 컴퓨터는 왜 10진수를 사용하지 않고 비트(2진수)를 사용하는가 ?
- 하드 웨어는 어떻게 조합 논리(불리언 대수)를 구현하는가 ?   
  (하드 웨어 = 비트에 대해 동작하는 모든 물리적인 장치)

<br/>
<br/>

# 디지털 컴퓨터의 사례

<br/>

### [근대의 계산 장치]
- 톱니 바퀴를 사용한 기계식 컴퓨터.   
  : 각 톱니 바퀴의 톱니 비율이 두 바퀴의 상대적인 회전 속도를 결정 -> 곱셈, 나눗셈 등 계산에 유리.

<br/>

1. `안티키테라` 기계 Antikythera.  
: 사용자가 다이얼을 돌려서 날짜를 입력하고 크랭크를 돌려서   
   해당 날짜의 태양의 위치나 달의 위치와 같은 천문학 계산을 수행하는 기계.
<p align="center"><img src="https://w.namu.la/s/0d2488a9ddd1bfb2a921f0cd33b3077e1c7d9c1049632596238f4d083d01b36fd4bf9acceaab2715b431aa1dd43205dd7a005722c243a1a0edcafdbb97463576484c93fc8305b753ab66f4c0101288ba1f8c12d9b402322002c448169e2de33d" alt="안티키테라 기계" width="300"/></p>

<br/>

2. `화기 제어 컴퓨터` fire control computer.  
: 수많은 톱니바퀴를 사용해 삼각함수와 미적분 계산을 수행하는 기계.
<p align="center"><img src="https://i.pinimg.com/1200x/70/81/4a/70814a54c13a43ba973faa1fa41ddb2c.jpg" alt="화기 제어 컴퓨터" width="300"/></p>

<br/>

- 톱니 바퀴를 사용하지 않은 기계식 컴퓨터.   

<br/>

1. `계산자` Slide rule.  
   : 많은 사람에게 최초로 대량 생산된 계산 장치.   
   : log(x * y) = log(x) + log(y) 라는 사실을 이용해 곱셈을 수행하는 기계.   
   : 계산자로 고정된 x로그 눈금과 움직이는 y로그 눈금의 기준선을 맞추면 두 수의 곱을 구할 수 있다.
<p align="center"><img src="https://i0.wp.com/innowiki.org/wp-content/uploads/2019/08/slide-rule.jpg?w=1200&ssl=1" alt="계산자" width="300"></p>

<br/>

### 아날로그와 디지털의 차이

<br/>

[ 계산자 vs 손가락 or 탤리 막대 or 기계식 계산기 ]

<br/>

- 계산자   
  : 실수를 표현할 수 있다. -> 수학적으로 연속적이다.   
  : 연속적(continuous) === 아날로그(analog).  
  
<br/>

- 손가락 or 탤리 막대 or 기계식 계산기
  : 실수를 표현할 수 없다. -> 수학적으로 이산적이다.   
  : 이산적(discrete) === 디지털(digital).  
    (라틴어로 손가락이 digitus)
    
<br/>

계산자는 실수를 표현할 수 있기 때문에 계산에는 아날로그가 적합해보인다. 그러나 `정밀도`의 문제가 있다!   
계산자 눈금에서 1.1을 선택하기는 쉽지만 9.1을 선택하지는 못한다. 눈금은 정해진 곳에만 표시되어 있기 때문이다.   
자의 크기를 늘리면 9.1을 쉽게 찾을 수도 있겠다. 그러나, 우리는 작고 빠르면서 전력 소모가 적은 컴퓨터를 원한다.   

<br/>

### 하드웨어에서 크기가 중요한 이유

<br/>

현대 컴퓨터는 전자를 움직여서 동작한다.   
전기는 빛의 속도로 움직이고, 빛의 속도는 초당 3억 미터다. (미국은 초당 10억 피트)   
이렇게 우리가 넘기 힘든 물리적인 제약이 있기 때문에, 대신 컴퓨터의 부품을 최대한 가깝게 위치시켜서 전자 여행의 속도를 최소화한다.

<br/>

<p align="center"><img src="https://cs.calvin.edu/activities/books/rit/chapter2/design/hardware/cpu/images/pentium4.jpg" alt="CPU" width="300"></p>

<br/>

오늘날 컴퓨터 `clock speed`(클록 속도)는 4GHz이다. === 1초에 40억 가지 계산을 처리할 수 있다.   
(1/40억)초 동안 전자가 이동할 수 있는 거리는 75밀리미터뿐이다!!   
위 그림은 전형적인 CPU의 모습을 보여준다. 이 CPU는 한 면이 18밀리미터다.   
(1/40억)초는 전자가 이 CPU 안을 (겨우) 2번 왕복할 수 있는 정도의 시간이다. 18 * 4 = 72   
-> *`컴퓨터의 모든 것을 작게 만들면 더 높은 성능을 달성한다 ?!!`*   
-> 이것이 계산 장치의 역사가 하드웨어를 작게 만드려는 노력으로 점철되어있는 이유중 하나다 ...! 🫢

<br/>

### 디지털을 사용하면 더 안정적인 장치를 만들 수 있다   

<br/>

[ 외부적인 간섭 ]

하드웨어를 작게 만들면 속도와 효율은 좋아지지만, 물체가 너무 작아지면 서로 간섭하기가 쉬워진다.   
계산자(연속적인 장치)는 외부적인 조건(ex. 내 시력, 손 흔들림 등)에 의해 결과값이 변할 수 있다.   
그러나 이산적인 장치는 `판정 기준`(decision criteria)이 있기 때문에 외부 조건의 영향을 받지 않는다.   
(손가락으로 숫자를 셀때는 중간이 없는 것 처럼 !!)

<br/>

[ 내부적인 간섭 ]

전자기력은 중력과 마찬가지로 멀리 떨어진 물체에 영향을 끼칠 수 있다.   
이 특성을 통해 라디오 송신같은 좋은 기능도 구현할 수 있지만, CPU칩 내부의 신호가 다른 선에 영향을 끼칠 수도 있다는 말이 된다.   
현대 컴퓨터 칩 안의 선은 몇 나노미터(10^-9) 떨어져 있다. (머리카락 지름이 10만 나노미터인거 감안하면 진짜 어마어마한 숫자 ..)   
칩 내부 선들 간에 발생하는 `crosstalk`(누화 효과)를 방지할 수 있는 적절한 방법이 없기 때문에    
더 높은 `판정 기준`을 통해 `noise immunity`(잡음 내성)을 갖는 디지털 회로를 사용하는 것이 필수적이다 !!   

<br/>

📍 `noise immunity`(잡음 내성)이 생기는 이유 ?   
:`판정 기준`이라는 장애물을 뛰어넘기 위해선 추가로 에너지가 필요하기 떄문에   
  연속적인 장치를 사용할 때는 얻을 수 없는 일정 수준의 잡음 내성이 생기게 된다.

<br/>

### 아날로그 세계에서 디지털 만들기

<br/>

수많은 엔지니어들은 (과학자들이 발견한) 자연적으로 발생하는 `transfer function`(전이 함수)을 응용하여 사용한다.   
전이 함수란, 실제 세계에서 벌어지는 현상을 표현한 함수이다.

<br/>

[ 카메라 필름의 전이 함수 ]

<br/>

<p align="center"><img src-"https://images.velog.io/images/ricky0813/post/44f55b06-bca8-4cc7-abe4-12e90146f359/image.png" alt="카메라 필름 전이 함수 그래프" width="300"></p>

<br/>

x축은 빛이 들어오는 양(입력값)을 뜻하고, y값은 센서가 기록하는 빛(출력값)을 의미한다.   
빛의 곡선이 상단부에 많이 닿으면, 센서에 기록되는 밝기값이 최댓값에 가까워지면서 이미지 노출이 과해진다.   
빛의 곡선이 하단부에 많이 닿으면, 이미지 노출이 부족해진다.   
-> 카메라의 경우는 노출을 조절해서 직선부에 많이 닿게 만드는 것이 목표이다.   
-> 빛을 많이 받아야 현실을 잘 반영하는 이미지를 얻을 수 있기 때문이다.   

<br/>

엔지니어들은 빛이 선형 영역에 닿게 하기 위해(원하는대로 구현하기 위해), 여러 장치들을 만들었다.   
ex. 카메라의 셔터 속도나 조리개를 조절하는 장치, 이어폰이나 스피커의 증폭 장치 등   

<br/>

[ 스피커의 증폭 전이 함수]

<br/>

<p align="center"><img src="https://images.velog.io/images/ricky0813/post/777dc69f-e100-4048-a876-110b9023ee0d/image.png" alt="증폭 전이 함수" width="300"></p>

<br/>

볼륨은 `gain`(게인)을 조절하거나, 곡선의 가파른 정도를 조정하여 결정된다.   
위 그림을 보면, 게인이 높으면 곡선이 가팔라지고, 출력도 커진다는 것을 알 수 있다.
그런데 여기서 게인을 최대로 올려버리면 어떻게 될까?

<br/>

<p align="center"><img src="https://images.velog.io/images/ricky0813/post/864b225c-6563-4d7f-90f3-dd3d3195ff2a/image.png" alt="증폭기 클리핑" width="300"></p>

<br/>

위 그림에서 입력이 전이 함수의 선형 영역을 넘어서기 떄문에 (입력값이 최저값과 최고값을 포함하고 있는 모습)   
출력이 더 이상 입력과 비슷하게 흘러가지 않는다.   
-> 이는 마치 한 손가락에서 다른 손가락으로 건너뛰는 것과 같다 !!   
   이때 `판정 기준`을 `threshold`(문턱값)이라고 부른다.   
-> *이 현상은 연속적인 공간을 이산적인 영역으로 나눠준다.*   
   *이로부터 우리는 안정성과 잡음 내성을 얻을 수 있다.*   

<br/>

### 10진 숫자 대신 비트를 사용하는 이유

<br/>

아날로그보다 디지털 기술이 더 나은 이유는 알겠다. 그런데 왜 10진수가 아니라 2진수를 사용할까? 둘 다 디지털 기술인데.   

<br/>

<b>📍 하드웨어에서 비트가 숫자보다 좋은 이유</b>
:  1. 열 손가락은 10가지 숫자밖에 표현하지 못하지만 각 손가락을 비트를 표현하는 데 사용하면 1000개가 넘는 숫자를 표현할 수 있다.   
      즉, 10진수보다 2진수가 100배 이상 효율이 좋다.   
   2. 10진수를 사용할 때 전이 함수로 각기 다른 10가지 문턱값을 구분하기 어렵다.   
      만들수는 있지만 훨씬 더 복잡하고 비용이 많이 든다.
      
<br/>
      
<p align="center"><img src="https://images.velog.io/images/ricky0813/post/b5ed6d6d-a061-43bf-9908-6dbb806ccbf9/image.png" alt="10진 문턱값과 2진 문턱값" width="300"></p>
      
<br/>
      
10진 숫자 하나보다는 10비트를 사용하는 편이 훨~씬 낫다.   
전기 엔지니어들은 하단부 영역을 `cutoff`(차단)이라고 부르고, `saturation`(포화)라고 부른다.   
비트를 사용하면 전이 함수가 아주 가파르기때문에 재량권이 아주 커진다. 👍🏻
