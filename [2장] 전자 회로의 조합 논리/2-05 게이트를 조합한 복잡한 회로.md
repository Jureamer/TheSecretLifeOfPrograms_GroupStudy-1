# 게이트를 조합한 복잡한 회로

게이트를 사용하면서 하드웨어의 설계 과정이 단순해졌다.

**7400 IC**

- 소규모 집적회로 (SSI: small-scale integration) 안에 네가지 NAND 게이트를 제공
- 이 패키지 하나로 40개의 개별 부품을 대체할 수 있다.
  (개별 부품 10개로 입력 2개인 NAND 게이트를 설계할 수 있다.)

- 그저 개별 부품을 사용하는 것보다 더 싸고, 더 작게 원하는 시스템을 만들 수 있다.

이 외에도 게이트의 조합 중 특히 자주 사용되는 조합이 있다.

- **중간 규모 집적 회로** (MSI: medium-scale integration)
- **대규모 집적 회로** (LSI: large-scale integration)
- **초대규모 집적 회로** (VLSI: very large-scale integration)

이렇게 게이트의 조합을 사용해 필요한 부품 수를 줄일 수 있다.
혹은 게이트의 조합으로 만든 고수준의 기본 기능 요소를 사용해 더 고수준의 부품을 만들 수 있다.

<br />
## 가산기

#### 반가산기

2의 보수 가산기를 만든다.
61p에서 두 비트의 합은 각 비트의 XOR, 올림은 두 비트의 AND라는 것을 배웠다.
이를 게이트로 구현하면 아래와 같다.

![반가산기](https://cdn.discordapp.com/attachments/879215554379018243/974669368027938816/IMG_9314.jpg)

AND 게이트 하나와 XOR 게이트 하나로 이루어짐을 알 수 있다. 이를 반가산기(half adder)라고 부른다. 이렇게 두 비트를 더할 때는 반가산기로도 충분하다.

<br />

#### 전가산기

그러나 반가산기는 다른 자리에서 올라오는 올림을 처리할 수 없다. 이를 위해 세 번째 입력이 필요하다. 세 입력 중 2개 이상이 1일 때 올림이 발생한다. 이를 고려한 것이 전가산기이다.
![전가산기](https://cdn.discordapp.com/attachments/879215554379018243/974669368367652904/IMG_9315.jpg)

**합**: C XOR (A XOR B)
**올림**: (A AND B) OR (A AND C) OR (B AND C)

**전가산기 진리표**
| A | B | C | 합 | 올림 |
|---|---|---|---|------|
| 0 | 0 | 0 | 0 | 0 |
| 0 | 0 | 1 | 1 | 0 |
| 0 | 1 | 0 | 1 | 0 |
| 0 | 1 | 1 | 0 | 1 |
| 1 | 0 | 0 | 1 | 0 |
| 1 | 0 | 1 | 0 | 1 |
| 1 | 1 | 0 | 0 | 1 |
| 1 | 1 | 1 | 1 | 1 |

그림을 보면 더 많은 게이트가 필요하지만, 반가산기를 2개 사용하는 것보다 시간 지연이 적고, 더 나은 회로를 만들 수 있다.

<br />

#### 리플 자리올림 가산기

![리플 자리올림 가산기](https://cdn.discordapp.com/attachments/879215554379018243/974669367948222505/IMG_9316.jpg)

전가산기로 여러 비트를 더하는 가산기를 만들 수 있다. 리플 자리올림 계산기는 전가산기를 여러개 이어붙인 형태인데, 자리올림이 아래쪽 비트로 부터 위쪽 비트로 물결이 퍼져나가는 것처럼 전달된다.
아래 비트로 부터 자리 올림수 출력을 받아야 하기 때문에, 비트 하나를 처리할 때마다, 게이트 2개에 해당하는 출력 시간 지연이 발생한다. 이러한 점은 32비트, 64비트 가산기를 만들면 (비트가 커질수록) 지연 시간이 더 커지게 된다.

<br />

#### 올림 예측 가산기 (carry look-ahead-adder)

올림 예측 가산기에서 모든 자리 올림수 출력은 예측 논리에 따라 한 번에 계산된다.

```java

// 129p - 올림 예측이 어떻게 동작하는가?

C2 = (A1 AND B1)OR(A1 AND C1)OR(B1 AND C1)

// C3를 계산하려면 C2가 필요하다.
C3 = (A2 AND B2)OR(A2 AND C2)OR(B2 AND C2)

// C2 자리에 첫 번째 식을 대입
C3 = (A2 AND B2)
    OR(A2 AND (A1 AND B1)OR(A1 AND C1)OR(B1 AND C1))
    OR(B2 AND (A1 AND B1)OR(A1 AND C1)OR(B1 AND C1))

```

이를 이용해 의존 관계를 줄일 수 있고, 지연을 한 번에 없앨 수 있다.

- AND와 OR 연산이 많아지지만, 전파 지연이 최대 2 게이트에 해당한다.
- Cn은 A와 B의 입력에 따라 결정된다.
- 올림 계산 시간이 비트 개수에 따라 달라지지 않고, 덧셈에 걸리는 시간이 일정한 수준으로 고정된다.

<br />

## 디코더 (decoder)

디코더는 인코딩 된 수를 개별 비트의 집합으로 만들어준다.

**닉시 튜브 (nixie tube)**

- 각기 다른 숫자를 표시하는 네온 사인의 모음
- 4비트 2진수를 10가지 각기 다른 출력으로 만들 수 있다.

**3:8 디코더**

- 8진 표현에서, 8진 숫자(3비트)를 단일 비트의 집합으로 되돌려준다.
  ![3:8 디코더](https://cdn.discordapp.com/attachments/879215554379018243/974669367675584603/IMG_9317.jpg)

**3:8 디코더 진리표**

| S0  | S1  | S2  |     | Y7  | Y6  | Y5  | Y4  | Y3  | Y2  | Y1  | Y0  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0   | 0   | 0   |     | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 1   |
| 0   | 0   | 1   |     | 0   | 0   | 0   | 0   | 0   | 0   | 1   | 0   |
| 0   | 1   | 0   |     | 0   | 0   | 0   | 0   | 0   | 1   | 0   | 0   |
| 0   | 1   | 1   |     | 0   | 0   | 0   | 0   | 1   | 0   | 0   | 0   |
| 1   | 0   | 0   |     | 0   | 0   | 0   | 1   | 0   | 0   | 0   | 0   |
| 1   | 0   | 1   |     | 0   | 0   | 1   | 0   | 0   | 0   | 0   | 0   |
| 1   | 1   | 0   |     | 0   | 1   | 0   | 0   | 0   | 0   | 0   | 0   |
| 1   | 1   | 1   |     | 1   | 0   | 0   | 0   | 0   | 0   | 0   | 0   |

이러한 동작이 모든 3비트 조합에 대해 성립한다.
이 때 입력이 3개, 출력이 8개이므로 3:8 디코더이다.
(입력이 2개일 때 출력은 2^2 = 4개이며, 이는 2:4 디코더라고 한다.)

<br />

## 디멀티플렉서 (demultiplexer, 디먹스(demux))

입력을 몇 가지 출력 중 한 곳으로 전달한다.
![디멀티플렉서](https://cdn.discordapp.com/attachments/879215554379018243/974669367704965140/IMG_9319.jpg)
D: 입력 신호
S0~S1: 디코더 입력
Y0~3: 출력

디먹스는 D를 디코더의 입력에 따라 네 가지 출력 중 하나로 전달한다.
![디먹스 스키매틱 기호](https://cdn.discordapp.com/attachments/879215554379018243/974669369948917832/IMG_9320.jpg)

## 실렉터 (selecor, 멀티 플렉서(multiplexer), 먹스 (mux))

디코더에 게이트를 추가해 실렉터를 만들 수 있다.
![실렉터 스키매틱 기호](https://cdn.discordapp.com/attachments/879215554379018243/974669366689951784/IMG_9322.jpg)

디먹스를 뒤집은 모양이다.
예를 들면, 다이얼에서 눈금 꺼짐, 토스트, 베이크, 브로일이라는 기호가 들어있는 토스트 오븐이 있을 때, 이 다이얼은 실렉터 스위치(selector switch)이다.

**토스터 오븐의 논리표**
|설정 | 위 열선(S0) | 아래 열선(S1) |
|--|--|--|
|끔(D0) | 끔 (0)| 끔 (0)|
|베이크(D1) | 끔 (0)| 켬 (1)|
|토스트(D2) | 끔 (0) |켬 (1)|
|브로일(D3) | 켬 (1)| 끔 (0)|
