# 비트맵

비트의 배열을 `비트맵`이라고 한다.

> 비트맵(영어: BMP file format, DIB file format 또는 bitmap, 문화어: 비트매프, 이진 숫자 배렬표)은 컴퓨터 분야에서 디지털 이미지를 저장하는 데 쓰이는 이미지 파일 포맷 또는 메모리 저장 방식의 한 형태이다.

![그림 7-4 배열을 비트맵으로 생각하기](https://media.discordapp.net/attachments/879215554379018243/992792551125954721/unknown.png)

8로 나누어서 특정 비트가 들어있는 바이트를 찾을 수 있다. `배럴 시프터`가 있으면 `3비트 오른쪽 시프트` 함으로서 빠르게 계산할 수 있다.
ex) 비트 번호가 17이면, 17/8 = 2이므로 2번째 바이트에서 비트를 찾을 수 있다.
<br />

**마스크**
'들여다볼 수 있는' 구멍이 있는 비트 패턴

- 0x07을 AND 해서 하위 3비트를 얻는다.
  ex) 비트 번호가 17일 때, 00010001 AND 00000111 = 00000001
- 그 후 앞에서 얻은 1 만큼 1을 왼쪽으로 시프트하면 마스크를 얻는다.
  ex) 앞에서 1을 한번 얻었으므로 1비트 왼쪽 시프트 한다. => 00000010
  이 값은 17번 비트를 찾으려면 2번째 바이트에서 어디를 봐야 하는지 알려준다.

배열 인덱스와 비트 마스크를 사용하면 비트맵 기본 연산을 쉽게 수행할 수 있다.

> **비트 마스킹**

    프로그램 작성 시 연산 시간과 공간을 고려했을 때 **이진수**를 **직접 사용**하면 더 효율적이다. 이를 위해 이진수 표현을 자료구조로 쓰는 기법을 **비트 마스크**(bit mask)라고 한다. 비트 연산을 활용하여 정수의 이진 비트를 처리한다.  <br />
    - 더 빠른 수행 시간
    - 더 간결한 코드
    - 더 적은 메모리 사용량을 통한 성능 향상
    - 연관 배열을 배열로 대체. - 시간 및 공간을 절약할 수 있다.

<br />

**비트맵 기본 연산**

- `비트 설정하기(set, 1로 만들기)`
  - 비트들(index) = 비트들(index) OR 마스크
- `비트 지우기(clear, 0으로 만들기)`
  - 비트들(index) = 비트들(index) AND (NOT 마스크)
- `비트가 1인지 검사하기`
  - 비트들(index) = (비트들(index) AND 마스크) != 0
- `비트가 0인지 검사하기`
  - 비트들(index) = (비트들(index) AND 마스크) = 0

그리고 **자원**이 사용 가능하거나 사용 중인지 여부를 나타낼 때도 비트맵을 사용한다.
사용 중인 자원을 비트로 표현하면 0이 하나라도 있는 바이트를 찾기 위해 배열을 검색할 수 있다. 이는 각 비트를 하나씩 따로 검사하는 것보다 훨씬 효율적이다.

---

<참고><br />
[비트마스크 (Bitmask) 연산](https://katfun.tistory.com/entry/%EB%B9%84%ED%8A%B8%EB%A7%88%EC%8A%A4%ED%81%AC-Bitmask-%EC%97%B0%EC%82%B0-1) <br />
[비트맵 위키백과](https://ko.wikipedia.org/wiki/%EB%B9%84%ED%8A%B8%EB%A7%B5)<br />
[비트 마스크](https://coding-food-court.tistory.com/193)
